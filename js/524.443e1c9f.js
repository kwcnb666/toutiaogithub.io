"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[524],{7524:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});i(7658);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"index"},[e("div",{staticClass:"top"},[e("div",{staticClass:"header"},[e("div",{staticClass:"search",on:{click:function(e){return t.$router.push("search")}}},[e("van-swipe",{staticClass:"myheight",attrs:{vertical:"","show-indicators":!1,autoplay:2e3}},t._l(t.fenlei,(function(i){return e("van-swipe-item",{key:i._id},[t._v(t._s(i.name))])})),1)],1)]),e("van-tabs",{attrs:{color:"mycolor",border:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.fenlei,(function(t){return e("van-tab",{key:t._id,attrs:{title:t.name}})})),1)],1),e("div",{staticClass:"mylist"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.tf,expression:"tf"}],staticClass:"gujia"},[e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}}),e("van-skeleton",{attrs:{title:"",row:5}})],1),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:t.getarticiefn},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(i,s){return e("div",{staticClass:"list"},[e("div",{on:{click:function(e){return t.tiao(i._id)}}},[e("li",{directives:[{name:"show",rawName:"v-show",value:0==i?.imageSrc.length,expression:"item?.imageSrc.length== 0"}],staticClass:"zero"},[e("h6",[t._v(t._s(i?.title))]),e("p",{staticClass:"myp"},[e("span",[t._v("作者："+t._s(i?.author))]),e("span",[t._v(t._s(i?.comment)+"条评论")]),e("span",[t._v(t._s(t.timeAgo(i?.time))+"发布")])])]),e("li",{directives:[{name:"show",rawName:"v-show",value:1==i?.imageSrc.length,expression:"item?.imageSrc.length== 1"}],staticClass:"one"},[e("div",{staticClass:"f"},[e("div",{staticClass:"zuo"},[e("h6",[t._v(t._s(i?.title))])]),e("div",{staticClass:"myimg you"},[e("img",{attrs:{src:i?.imageSrc,alt:""},on:{error:t.myerror}})])]),e("p",[e("span",[t._v("作者："+t._s(i?.author))]),e("span",[t._v(t._s(i?.comment)+"条评论")]),e("span",[t._v(t._s(t.timeAgo(i?.time))+"发布")])])]),e("li",{directives:[{name:"show",rawName:"v-show",value:3==i?.imageSrc.length,expression:"item?.imageSrc.length == 3"}],staticClass:"three"},[e("h6",[t._v(t._s(i?.title))]),e("div",{staticClass:"myimg"},t._l(i?.imageSrc,(function(i){return e("img",{attrs:{src:i,alt:""},on:{error:t.myerror}})})),0),e("p",[e("span",[t._v("作者："+t._s(i?.author))]),e("span",[t._v(t._s(i?.comment)+"条评论")]),e("span",[t._v(t._s(t.timeAgo(i?.time))+"发布")])])])])])})),0)],1)])},a=[],n=i(2419),r=i(6817),o={name:"index",data(){return{active:0,list:[],fenlei:[],loading:!1,finished:!1,limit:10,loginfo:JSON.parse(sessionStorage.getItem("loginfo")),tf:!0}},computed:{cate_id(){return this.fenlei[this.active]?._id}},watch:{cate_id(){this.list=[],this.getarticiefn()}},created(){this.fenleifn(),this.gujiaFn()},methods:{tiao(t){null==this.loginfo?this.$dialog.confirm({title:"警告警告··········警告警告",message:"小伙子，没有登录还想进入详情页？？？？想什么呢？怎么可能呢嘿嘿嘿"}).then((()=>{this.$router.push("/login")})).catch((()=>{this.$toast("你小子取消是吧，那你别想进去了！！！！"),this.$notify({type:"danger",message:"你小子取消是吧，那你别想进去了！！！！"})})):this.$router.push({name:"detailed",query:{item_id:t,cate_id:this.loginfo?.uid}})},gujiaFn(){setTimeout((()=>{this.tf=!1}),1500)},timeAgo(t){return(0,r.y)(t)},myerror(t){t.target.src=i(5551)},fenleifn(){(0,n.tg)().then((t=>{this.fenlei=t.data.data})).catch((t=>{console.log("err: ",t)}))},getarticiefn(){(0,n.g5)({cate_id:this.cate_id,skip:this.list.length,limit:this.limit}).then((t=>{this.list=this.list.concat(t.data.data),this.loading=!1,this.list.length==t.data.count&&(this.finished=!0,this.$toast("没有更多了"),this.$notify({type:"success",message:"没有更多了"}))})).catch((t=>{console.log("err: ",t)}))}}},l=o,c=i(1001),h=(0,c.Z)(l,s,a,!1,null,"26fceb32",null),m=h.exports},6817:function(t,e,i){function s(t){var e=new Date(t),i=e.getTime(),s=6e4,a=60*s,n=24*a,r=7*n,o=30*n,l=12*o,c=(new Date).getTime(),h=c-i,m="";h<0&&(m="未来");var v=h/s,u=h/a,d=h/n,g=h/r,f=h/o,p=h/l;return p>=1?m=" "+parseInt(p)+"年前":f>=1&&f<12?m=" "+parseInt(f)+"月前":g>=1&&g<5&&d>6&&f<1?m=" "+parseInt(g)+"周前":d>=1&&d<=6?m=" "+parseInt(d)+"天前":u>=1&&u<=23?m=" "+parseInt(u)+"小时前":v>=1&&v<=59?m=" "+parseInt(v)+"分钟前":h>=0&&h<=s&&(m="刚刚"),m}i.d(e,{y:function(){return s}})},5551:function(t,e,i){t.exports=i.p+"img/error.934d6585.png"}}]);
//# sourceMappingURL=524.443e1c9f.js.map