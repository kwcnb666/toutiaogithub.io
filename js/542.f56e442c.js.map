{"version":3,"file":"js/542.f56e442c.js","mappings":"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","sources":["webpack://toutiao/./src/views/userAction/genggai.vue","webpack://toutiao/./src/assets/time1.js","webpack://toutiao/src/views/userAction/genggai.vue","webpack://toutiao/./src/views/userAction/genggai.vue?4c1c","webpack://toutiao/./src/views/userAction/genggai.vue?d024"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"adiv\"},[_c('van-icon',{staticClass:\"myicon\",attrs:{\"name\":\"arrow-left\"},on:{\"click\":function($event){return _vm.$router.back()}}}),_c('h1',[_vm._v(\"修改个人信息\")])],1),_c('div',{staticClass:\"mytouxiang\"},[_c('van-image',{staticClass:\"touxiang\",attrs:{\"round\":\"\",\"src\":_vm.avatar},on:{\"click\":_vm.btn}})],1),_c('van-uploader',{attrs:{\"after-read\":_vm.afterRead,\"multiple\":\"\"},on:{\"click-upload\":_vm.dian}},[_c('van-button',{attrs:{\"icon\":\"plus\"}},[_vm._v(\"更改头像\")])],1),_c('van-field',{attrs:{\"name\":\"sex\",\"label\":\"修改性别\"},scopedSlots:_vm._u([{key:\"input\",fn:function(){return [_c('van-radio-group',{attrs:{\"direction\":\"horizontal\"},model:{value:(_vm.sex),callback:function ($$v) {_vm.sex=$$v},expression:\"sex\"}},[_c('van-radio',{attrs:{\"name\":\"男\"}},[_vm._v(\"男\")]),_c('van-radio',{attrs:{\"name\":\"女\"}},[_vm._v(\"女\")])],1)]},proxy:true}])}),_c('van-cell-group',[_c('van-field',{attrs:{\"label\":\"修改名字\",\"placeholder\":\"请输入名字\"},model:{value:(_vm.nickname),callback:function ($$v) {_vm.nickname=$$v},expression:\"nickname\"}}),_c('van-field',{attrs:{\"label\":\"修改生日\",\"placeholder\":\"请输入生日\"},model:{value:(_vm.birthday),callback:function ($$v) {_vm.birthday=$$v},expression:\"birthday\"}}),_c('van-field',{attrs:{\"readonly\":\"\",\"clickable\":\"\",\"name\":\"datetimePicker\",\"value\":_vm.value,\"label\":\"时间选择\",\"placeholder\":\"点击选择时间\"},on:{\"click\":function($event){_vm.showPicker = true}}}),_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showPicker),callback:function ($$v) {_vm.showPicker=$$v},expression:\"showPicker\"}},[_c('van-datetime-picker',{attrs:{\"type\":\"date\",\"title\":\"选择年月日\",\"min-date\":_vm.minDate,\"max-date\":_vm.maxDate},on:{\"confirm\":_vm.onConfirm,\"cancel\":function($event){_vm.showPicker = false}},model:{value:(_vm.currentDate),callback:function ($$v) {_vm.currentDate=$$v},expression:\"currentDate\"}})],1)],1),_c('van-cell',{attrs:{\"value\":\"\",\"is-link\":\"\"},on:{\"click\":_vm.change},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('van-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(\"确认修改\")])]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 中国标准时间 转换成 年月日\r\nexport function timeago (date) {\r\n    var y = date.getFullYear();\r\n    var m = date.getMonth() + 1;\r\n    m = m < 10 ? ('0' + m) : m;\r\n    var d = date.getDate();\r\n    d = d < 10 ? ('0' + d) : d;\r\n    var h = date.getHours();\r\n    var minute = date.getMinutes();\r\n    minute = minute < 10 ? ('0' + minute) : minute;\r\n    var s = date.getSeconds();\r\n    \r\n    s = s < 10 ? '0' + s : s;\r\n    return y + '-' + m + '-' + d \r\n  }\r\n  ","<template>\r\n  <div>\r\n <div class=\"adiv\">\r\n      <van-icon name=\"arrow-left\" class=\"myicon\" @click=\"$router.back()\" />\r\n      <h1>修改个人信息</h1>\r\n    </div>\r\n     <div class=\"mytouxiang\">\r\n  <van-image class=\"touxiang\" round :src=\"avatar\" @click=\"btn\"/>\r\n \r\n\r\n      </div>\r\n        <van-uploader  :after-read=\"afterRead\"  multiple @click-upload=\"dian\">\r\n  <van-button icon=\"plus\">更改头像</van-button>\r\n</van-uploader>\r\n    <van-field name=\"sex\" label=\"修改性别\">\r\n  <template #input>\r\n    <van-radio-group v-model=\"sex\" direction=\"horizontal\">\r\n      <van-radio name=\"男\">男</van-radio>\r\n      <van-radio name=\"女\">女</van-radio>\r\n    </van-radio-group>\r\n  </template>\r\n</van-field>\r\n<van-cell-group>\r\n  <van-field v-model=\"nickname\" label=\"修改名字\" placeholder=\"请输入名字\" />\r\n  <van-field v-model=\"birthday\" label=\"修改生日\" placeholder=\"请输入生日\" />\r\n \r\n <van-field\r\n  readonly\r\n  clickable\r\n  name=\"datetimePicker\"\r\n  :value=\"value\"\r\n  label=\"时间选择\"\r\n  placeholder=\"点击选择时间\"\r\n  @click=\"showPicker = true\"\r\n/>\r\n<van-popup v-model=\"showPicker\" position=\"bottom\">\r\n\r\n   <van-datetime-picker\r\n  v-model=\"currentDate\"\r\n  type=\"date\"\r\n  title=\"选择年月日\"\r\n  :min-date=\"minDate\"\r\n  :max-date=\"maxDate\"\r\n  @confirm=\"onConfirm\"\r\n    @cancel=\"showPicker = false\"\r\n/>\r\n</van-popup>\r\n \r\n\r\n\r\n \r\n</van-cell-group>\r\n\r\n<van-cell value=\"\" is-link @click=\"change\">\r\n        <!-- 使用 title 插槽来自定义标题 -->\r\n        <template #title>\r\n          <van-tag type=\"danger\" >确认修改</van-tag>\r\n        </template>\r\n      </van-cell>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\"\r\nimport { getuserInfoAPI } from \"@/api/home\";\r\nimport { ImagePreview } from 'vant';\r\nimport { timeago } from \"@/assets/time1\";\r\nexport default {\r\n    name:\"genggai\",\r\n    components: {\r\n    [ImagePreview.Component.name]: ImagePreview.Component,\r\n  },\r\n    data() {\r\n        return {\r\n           minDate: new Date(2020, 0, 1),\r\n      maxDate: new Date(2025, 10, 1),\r\n      currentDate: new Date(2021, 0, 17),\r\n      value: '',\r\n      showPicker: false,\r\n            token:\"\",\r\n          nickname:\"\",\r\n      birthday: '',\r\n      sex:'',\r\n      avatar:'',\r\n        loginfo: JSON.parse(sessionStorage.getItem(\"loginfo\")),\r\n         myinfo: [],\r\n         date: '',\r\n      show: false,\r\n        }\r\n    },\r\ncreated() {\r\n   getuserInfoAPI({ token: this.loginfo.token })\r\n        .then((result) => {\r\n          console.log(\"result: \", result);\r\n          this.nickname = result.data.userInfo.nickname;\r\n          this.birthday = result.data.userInfo.birthday;\r\n          this.sex = result.data.userInfo.sex;\r\n          this.avatar = result.data.userInfo.avatar;\r\n\r\n\r\n\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"err: \", err);\r\n        });\r\n},\r\n    methods: {\r\n    \r\n       onConfirm(value) {\r\n        console.log('value: ', value);\r\n      this.birthday = timeago(value);\r\n      this.showPicker = false;\r\n    },\r\n        btn(){\r\n        ImagePreview([this.avatar])\r\n    },\r\n        dian(){\r\n            axios\r\n        .get(\r\n          \"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/upload/token\"\r\n        )\r\n        .then((result) => {\r\n          console.log(\"huoqu: \", result);\r\n          this.token = result.data.token;\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"huoqu: \", err);\r\n        });\r\n      },\r\n    afterRead(file) {\r\n      // 此时可以自行将文件上传至服务器\r\n   \r\n      let param = new FormData();\r\n      param.append(\"token\", this.token); \r\n      param.append(\"file\", file.file); \r\n      param.append(\"key\", this.nanoid+file.file.name);\r\n      axios\r\n        .post(\r\n          \"https://upload-z1.qiniup.com\",\r\n          param,{'Content-Type':'multipart/form-data'}\r\n        )\r\n        .then((result) => {\r\n            console.log('result: ', result);\r\n            this.avatar='http://toutiao.longxiaokj.com/'+result.data.key\r\n            console.log('first', 'http://toutiao.longxiaokj.com/'+result.data.key)\r\n\r\n        })\r\n        .catch((err) => {\r\n            console.log('err: ', err);\r\n            \r\n        });\r\n   \r\n      // console.log(file.file.name);\r\n    }, \r\n    change() {\r\n      // alert(1)\r\n     \r\n      axios\r\n        .post(\r\n          \"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/editUserInfo\",\r\n          {\r\n            uid: this.loginfo.uid,\r\n            avatar:\r\n              this.avatar, //头像\r\n            nickname:this.nickname,\r\n            birthday: this.birthday,\r\n            sex: this.sex,\r\n          }\r\n        )\r\n        .then((result) => {\r\n          console.log(\"result: \", result);\r\n          this.$toast(result.data.msg)\r\n          if(result.data.msg){\r\n              this.$router.push(\"/home\")  \r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"err: \", err);\r\n        });\r\n    },\r\n    },\r\n    \r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.adiv {\r\n  width: 100vw;\r\n  height: 50px;\r\n  background-color: $mycolor;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  color: aliceblue;\r\n  font-size: 14px;\r\n}\r\nh1 {\r\n  margin: 0 auto;\r\n  font-size: 16px;\r\n}\r\n.myicon {\r\n  font-size: 32px;\r\n}\r\n.mytouxiang{\r\n  width: 100vw;\r\n  text-align: center;\r\n  margin-top: 20px;\r\n.touxiang{\r\nwidth: 60px;height: 60px;\r\n}\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./genggai.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./genggai.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./genggai.vue?vue&type=template&id=7f088b1a&scoped=true&\"\nimport script from \"./genggai.vue?vue&type=script&lang=js&\"\nexport * from \"./genggai.vue?vue&type=script&lang=js&\"\nimport style0 from \"./genggai.vue?vue&type=style&index=0&id=7f088b1a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f088b1a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","_v","avatar","btn","afterRead","dian","scopedSlots","_u","key","fn","model","value","sex","callback","$$v","expression","proxy","nickname","birthday","showPicker","minDate","maxDate","onConfirm","currentDate","change","staticRenderFns","timeago","date","y","getFullYear","m","getMonth","d","getDate","getHours","minute","getMinutes","s","getSeconds","name","components","data","token","loginfo","myinfo","show","created","getuserInfoAPI","then","console","catch","methods","ImagePreview","axios","param","uid","component"],"sourceRoot":""}