"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[190],{9190:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"adiv"},[t("van-icon",{staticClass:"myicon",attrs:{name:"arrow-left"},on:{click:function(t){return e.$router.back()}}}),t("h1",[e._v("搜索")])],1),t("form",{attrs:{action:"/"}},[t("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:e.onSearch,cancel:e.onCancel,input:e.oninput},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.list.length>0,expression:"list.length>0"}],staticClass:"datalist"},e._l(e.list,(function(a){return t("div",{key:a.id},[t("router-link",{attrs:{to:{path:"/detailed",query:{item_id:a._id,cate_id:a.cate_id}},custom:""},scopedSlots:e._u([{key:"default",fn:function({navigate:s}){return[t("span",{attrs:{role:"link"},on:{click:s,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:s.apply(null,arguments)}}},[t("div",[t("van-icon",{attrs:{name:"search"}}),t("span",[e._v(" "+e._s(a.title))])],1)])]}}],null,!0)})],1)})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.list.length,expression:"list.length==0"}],staticClass:"history"},[t("h1",[t("p",[e._v("历史搜索记录")]),e._v(" "),t("van-tag",{attrs:{type:"danger",size:"large"},on:{click:e.crear}},[e._v("清除")])],1),e._l(e.search,(function(a){return t("li",{on:{click:function(t){return e.add(a.value)}}},[e._v(e._s(a.value))])}))],2)])},n=[],i=(a(541),a(6817)),r=a(2419),l={name:"search",data(){return{value:"",list:[],search:[],timer:null}},created(){let e=localStorage.getItem("search");e&&(this.search=JSON.parse(e))},methods:{time(e){return(0,i.time)(e)},add(e){this.value=e,this.oninput(e)},crear(){this.$dialog.confirm({message:"确定清除全部吗"}).then((()=>{this.search=[],localStorage.clear("search")})).catch((()=>{this.$toast("取消清除全部"),this.$notify({type:"success",message:"取消清除全部"})}))},oninput(e){e=e.trim(),0!==e.length?(null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{(0,r.jE)({skip:0,limit:100,key_word:e}).then((e=>{this.list=e.data.data})).catch((e=>{console.log("err: ",e)}))}),500)):this.list=[]},onSearch(e){console.log("val: ",e);let t=this.search.findIndex((t=>t.value===e));t>=0&&this.search.splice(t,1),console.log("first",t),this.search.unshift({value:e,time:+new Date}),localStorage.setItem("search",JSON.stringify(this.search))},onCancel(){this.$toast("取消")}}},c=l,o=a(1001),u=(0,o.Z)(c,s,n,!1,null,"cc62bd18",null),h=u.exports},6817:function(e,t,a){function s(e){var t=new Date(e),a=t.getTime(),s=6e4,n=60*s,i=24*n,r=7*i,l=30*i,c=12*l,o=(new Date).getTime(),u=o-a,h="";u<0&&(h="未来");var d=u/s,v=u/n,p=u/i,m=u/r,f=u/l,g=u/c;return g>=1?h=" "+parseInt(g)+"年前":f>=1&&f<12?h=" "+parseInt(f)+"月前":m>=1&&m<5&&p>6&&f<1?h=" "+parseInt(m)+"周前":p>=1&&p<=6?h=" "+parseInt(p)+"天前":v>=1&&v<=23?h=" "+parseInt(v)+"小时前":d>=1&&d<=59?h=" "+parseInt(d)+"分钟前":u>=0&&u<=s&&(h="刚刚"),h}a.d(t,{y:function(){return s}})}}]);
//# sourceMappingURL=190.56eaae7c.js.map