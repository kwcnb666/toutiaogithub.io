{"version":3,"file":"js/190.56eaae7c.js","mappings":"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","sources":["webpack://toutiao/./src/views/search.vue","webpack://toutiao/src/views/search.vue","webpack://toutiao/./src/views/search.vue?bbef","webpack://toutiao/./src/views/search.vue?f108","webpack://toutiao/./src/assets/time.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"adiv\"},[_c('van-icon',{staticClass:\"myicon\",attrs:{\"name\":\"arrow-left\"},on:{\"click\":function($event){return _vm.$router.back()}}}),_c('h1',[_vm._v(\"搜索\")])],1),_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"请输入搜索关键词\"},on:{\"search\":_vm.onSearch,\"cancel\":_vm.onCancel,\"input\":_vm.oninput},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.list.length>0),expression:\"list.length>0\"}],staticClass:\"datalist\"},_vm._l((_vm.list),function(item){return _c('div',{key:item.id},[_c('router-link',{attrs:{\"to\":{ path: '/detailed', query: { item_id:item._id,cate_id:item.cate_id} },\"custom\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function({ navigate }){return [_c('span',{attrs:{\"role\":\"link\"},on:{\"click\":navigate,\"keypress\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return navigate.apply(null, arguments)}}},[_c('div',[_c('van-icon',{attrs:{\"name\":\"search\"}}),_c('span',[_vm._v(\" \"+_vm._s(item.title))])],1)])]}}],null,true)})],1)}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.list.length==0),expression:\"list.length==0\"}],staticClass:\"history\"},[_c('h1',[_c('p',[_vm._v(\"历史搜索记录\")]),_vm._v(\" \"),_c('van-tag',{attrs:{\"type\":\"danger\",\"size\":\"large\"},on:{\"click\":_vm.crear}},[_vm._v(\"清除\")])],1),_vm._l((_vm.search),function(item){return _c('li',{on:{\"click\":function($event){return _vm.add(item.value)}}},[_vm._v(_vm._s(item.value))])})],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","    <template>\r\n  <div>\r\n    <div class=\"adiv\">\r\n      <van-icon name=\"arrow-left\" class=\"myicon\" @click=\"$router.back()\" />\r\n      <h1>搜索</h1>\r\n    </div>\r\n    <form action=\"/\">\r\n      <van-search\r\n        v-model=\"value\"\r\n        show-action\r\n        placeholder=\"请输入搜索关键词\"\r\n        @search=\"onSearch\"\r\n        @cancel=\"onCancel\"\r\n        @input=\"oninput\"\r\n      />\r\n    </form>\r\n    <div class=\"datalist\" v-show=\"list.length>0\">\r\n      <div v-for=\"item in list\" :key=\"item.id\">\r\n         <router-link\r\n          :to=\"{ path: '/detailed', query: { item_id:item._id,cate_id:item.cate_id} }\"\r\n          custom\r\n          v-slot=\"{ navigate }\"\r\n        >\r\n          <span @click=\"navigate\" @keypress.enter=\"navigate\" role=\"link\">\r\n        <div> <van-icon name=\"search\"></van-icon>\r\n        <span> {{ item.title }}</span></div>\r\n        </span>\r\n        </router-link>\r\n       \r\n      </div>\r\n    </div>\r\n    <div v-show=\"list.length==0\" class=\"history\">\r\n        <h1><p>历史搜索记录</p> <van-tag type=\"danger\" size=\"large\" @click=\"crear\">清除</van-tag></h1>\r\n        <li v-for=\"item in search\" @click=\"add(item.value)\">{{item.value}}</li>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n    <script>\r\nimport {time} from \"@/assets/time\"\r\n\r\nimport {getsearchAPI} from \"@/api/home\"\r\nexport default {\r\n  name: \"search\",\r\n  data() {\r\n    return { value: \"\", list: [],search:[] ,  timer: null};\r\n  },\r\n  created () {\r\n    let search_history=localStorage.getItem(\"search\")\r\n    if(search_history){\r\n        this.search=JSON.parse(search_history)\r\n    }\r\n  },\r\n  methods: {\r\n    time(val){\r\n        return time(val)\r\n    },\r\n    add(val){\r\n      this.value=val\r\n     this.oninput(val)\r\n    },\r\n    crear(){\r\n       this.$dialog\r\n        .confirm({\r\n          message: \"确定清除全部吗\",\r\n        })\r\n        .then(() => {\r\n          this.search=[]  \r\n          localStorage.clear(\"search\")\r\n        })\r\n        .catch(() => {\r\n          this.$toast(\"取消清除全部\");\r\n          this.$notify({ type: \"success\", message: \"取消清除全部\" });\r\n        }); \r\n    },\r\n    oninput(val) {\r\n        val=val.trim()\r\n        if(val.length===0){\r\n              this.list=[]\r\n              return\r\n        }\r\n      if (this.timer !== null) clearTimeout(this.timer)\r\n      this.timer = setTimeout(() => {\r\n       getsearchAPI({\r\n        skip: 0, //起始条数\r\n        limit: 100, //一次返回的条数\r\n        key_word: val, //关键字\r\n      })\r\n        .then((result) => {\r\n          this.list=result.data.data\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"err: \", err);\r\n        });\r\n      }, 500)\r\n\r\n       \r\n    },\r\n    onSearch(val) { \r\n      console.log('val: ', val);\r\n      let index =this.search.findIndex((v)=>{\r\n          return v.value===val\r\n      })\r\n      if(index>=0){\r\n          this.search.splice(index,1)\r\n      }\r\n      console.log('first', index)\r\n       this.search.unshift({\r\n        value:val,\r\n        time:+new Date()\r\n       });\r\n       localStorage.setItem(\"search\", JSON.stringify(this.search))\r\n    },\r\n    onCancel() {\r\n      this.$toast(\"取消\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n <style lang=\"scss\" scoped>\r\n.adiv {\r\n  width: 100vw;\r\n  height: 50px;\r\n \r\n  background-color: $mycolor;\r\n  display: flex;\r\n  align-items: center;\r\n  color: aliceblue;\r\n  font-size: 14px;\r\n}\r\nh1 {\r\n  margin-left: calc(50vw - 32px);\r\n\r\n  font-size: 16px;\r\n}\r\n.myicon {\r\n  font-size: 32px;\r\n}\r\n.datalist {\r\n  width: 100vh;\r\n  margin: 8px 0px;\r\n  padding: 0 15px 0 20px;\r\n  font-size: 14px;\r\n  background-color:white;\r\n  line-height: 2em;\r\n\r\n  & > div {\r\n    padding: 8px 0;\r\n    border-bottom: 1px dotted #ccc;\r\n  }\r\n  span {\r\n    width: 80vw;\r\n    display: inline-block;\r\n    line-height: 1.5em;\r\n    word-break: normal;\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n  }\r\n}\r\n.history{\r\n  width: 100vw;\r\n \r\n\r\n  h1{\r\n    margin: 20px;\r\n    font-size: 18px;\r\n   display: flex;\r\n       justify-content: space-between;\r\n\r\n\r\n  }\r\n  li{\r\n    width: auto;\r\n    height: 20px;\r\n    text-align: center;\r\n    padding:  0px 10px 0px 10px;\r\n    line-height: 20px;\r\n    margin: 10px;\r\n    float: left;\r\n    \r\n    border: 1px solid #ccc;\r\n    border-radius: 50px;\r\n    box-shadow: #ccc 1px 2px 0px 0px;\r\n     &:hover{\r\n      color: red;\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=cc62bd18&scoped=true&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=cc62bd18&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"cc62bd18\",\n  null\n  \n)\n\nexport default component.exports","export function timeago (time) {\r\n    var data = new Date(time);\r\n    var dateTimeStamp = data.getTime()\r\n    var minute = 1000 * 60;      //把分，时，天，周，半个月，一个月用毫秒表示\r\n    var hour = minute * 60;\r\n    var day = hour * 24;\r\n    var week = day * 7;\r\n    var month = day * 30;\r\n    var year = month * 12;\r\n    var now = new Date().getTime();   //获取当前时间毫秒\r\n    var diffValue = now - dateTimeStamp;//时间差\r\n   \r\n    var result = \"\";\r\n    if (diffValue < 0) {\r\n      result = \"\" + \"未来\";\r\n    }\r\n    var minC = diffValue / minute;  //计算时间差的分，时，天，周，月\r\n    var hourC = diffValue / hour;\r\n    var dayC = diffValue / day;\r\n    var weekC = diffValue / week;\r\n    var monthC = diffValue / month;\r\n    var yearC = diffValue / year;\r\n   \r\n    if (yearC >= 1) {\r\n      result = \" \" + parseInt(yearC) + \"年前\"\r\n    } else if (monthC >= 1 && monthC < 12) {\r\n      result = \" \" + parseInt(monthC) + \"月前\"\r\n    } else if (weekC >= 1 && weekC < 5 && dayC > 6 && monthC < 1) {\r\n      result = \" \" + parseInt(weekC) + \"周前\"\r\n    } else if (dayC >= 1 && dayC <= 6) {\r\n      result = \" \" + parseInt(dayC) + \"天前\"\r\n    } else if (hourC >= 1 && hourC <= 23) {\r\n      result = \" \" + parseInt(hourC) + \"小时前\"\r\n    } else if (minC >= 1 && minC <= 59) {\r\n      result = \" \" + parseInt(minC) + \"分钟前\"\r\n    } else if (diffValue >= 0 && diffValue <= minute) {\r\n      result = \"刚刚\"\r\n    }\r\n   \r\n\r\n    return result\r\n  }"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","back","_v","onSearch","onCancel","oninput","model","value","callback","$$v","expression","directives","name","rawName","list","length","_l","item","key","id","path","query","item_id","_id","cate_id","scopedSlots","_u","fn","navigate","type","indexOf","_k","keyCode","apply","arguments","_s","title","crear","search","add","staticRenderFns","data","timer","created","methods","time","confirm","message","then","localStorage","catch","val","getsearchAPI","skip","limit","key_word","console","component","timeago","Date","dateTimeStamp","getTime","minute","hour","day","week","month","year","now","diffValue","result","minC","hourC","dayC","weekC","monthC","yearC","parseInt"],"sourceRoot":""}